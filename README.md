# Horizon-Social-Platform
格局下的仿社交平台

## 数据库
### 数据库设计三大范式
为了建立冗余较小、结构合理的数据库，设计数据库时必须遵循一定的规则。在关系型数据库中这种规则就称为范式。范式是符合某一种设计要求的总结。要想设计一个结构合理的关系型数据库，必须满足一定的范式。
1. 第一范式(确保每列保持原子性)
   
   第一范式是最基本的范式。如果数据库表中的**所有字段值都是不可分解的原子值**，就说明该数据库表满足了第一范式。
   
   **e.g.** 地址信息分段（如果要使用省份信息进行分类，可以拆分地址信息）
3. 第二范式(确保表中的每列都和主键相关)
   
   第二范式在第一范式的基础之上更进一层。第二范式需要确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关（主要针对联合主键而言）。**也就是说在一个数据库表中，一个表中只能保存一种数据，不可以把多种数据保存在同一张数据库表中。**
   
   **e.g.** 要设计一个订单信息表，因为订单中可能会有多种商品，所以要将订单编号和商品编号作为数据库表的联合主键，这样就产生问题：这个表中是以订单编号和商品编号作为联合主键。这样在该表中商品名称、单位、商品价格等信息不与该表的主键相关，而仅仅是与商品编号相关。所以在这里违反了第二范式的设计原则。

   **方法**：把这个订单信息表进行拆分，把商品信息分离到另一个表中，把订单项目表也分离到另一个表中（三个表：订单信息表，商品信息表，订单项目表）
   
5. 第三范式(确保每列都和主键列直接相关,而不是间接相关)

   **第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。**
   
   **e.g.** 在设计一个订单数据表的时候，可以将客户编号作为一个外键和订单表建立相应的关系。而不可以在订单表中添加关于客户其它信息（比如姓名、所属公司等）的字段。

### 数据库设计指南
1. 对地址分段管理，多个字段存储方便日后使用
2. 选择数字类型和文本类型尽量充足
3. 每张表最好增加删除标记字段（逻辑删除而非物理删除，便于分析用户行为）
4. 表的索引数量要适中
5. 设计表的时候，适度冗余字段，减少join操作
6. 对于一些比较频繁的作为查询条件的字段建立索引
7. 设计表的时候，所有表和字段都要增加一些注释
8. 设计数据库表时加上创建、修改人和时间
9. 尽量所有列定义为NOT NULL-减少非空判断
10. 数据库过大时可以进行分库分表操作
